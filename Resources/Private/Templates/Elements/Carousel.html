{namespace theme=KayStrobach\Themes\ViewHelpers}
{namespace v=FluidTYPO3\Vhs\ViewHelpers}
<div id="c{data.uid}" class="{current} carousel slide pt-2 pb-2" data-ride="carousel" data-interval="9000">
	<!-- Indicators -->
	<ol class="carousel-indicators">
		<f:for each="{data.tx_gridelements_view_children}" as="carousel-indicators" iteration="indicator">
			<f:if condition="{v:resource.record.fal(table:'tt_content', field:'media', uid:'{carousel-indicators.uid}')->f:count()} > 0">
				<f:then>
					<li data-target="#c{data.uid}" data-slide-to="{indicator.index}" {f:if(condition:'{indicator.isFirst}',then:' class="active"')}>
						<v:resource.record.fal table="tt_content" field="media" uid="{carousel-indicators.uid}" as="media">
							<f:image
								src="{media.0.id}"
								class="img-fluid" />
						</v:resource.record.fal>
					</li>
				</f:then>
				<f:else>
					<li data-target="#c{data.uid}" data-slide-to="{indicator.index}" {f:if(condition:'{indicator.isFirst}',then:' class="active"')}>
						<f:image src="" alt="" class="img-fluid"/>
					</li>
				</f:else>
			</f:if>
		</f:for>
	</ol>
	<!-- Wrapper for slides -->
	<div class="carousel-inner" role="listbox">
		<f:for each="{data.tx_gridelements_view_children}" as="slide-content" iteration="slide">
			<div id="slide-{slide.index}" class="carousel-item {f:if(condition:'{slide.isFirst}',then:'active')}">
				<f:format.raw>{theme:arrayIndex(object: data, index: 'tx_gridelements_view_child_{slide-content.uid}')}
				</f:format.raw>
			</div>
		</f:for>
	</div>
	<!-- Controls -->
	<a class="left carousel-control" href="#c{data.uid}" role="button" data-slide="prev">
		<span class="icon-prev" aria-hidden="true"></span>
		<span class="sr-only">Previous</span>
	</a>
	<a class="right carousel-control" href="#c{data.uid}" role="button" data-slide="next">
		<span class="icon-next" aria-hidden="true"></span>
		<span class="sr-only">Next</span>
	</a>
	<div class="progress-bar"></div>
</div>
